<% include head.html %>

<body>    
  <% include navi.html %>

    <div class="container-fluid">
      <div class="row">
        <!-- 属性栏目 -->
        <div class="col-md-4 col-md-offset-8 sidebar">
              
        </div>

        <div class="col-md-8 main">
          <!-- 控制条 -->
          <nav class="navbar navbar-default" role="navigation" data-spy="affix" data-offset-top="1" data-offset-bottom="200">
            <div class="container-fluid">
              <!-- Collect the nav links, forms, and other content for toggling -->
              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                  <li><a href="#" class="importbtn" data-type="gsm">导入数据(csv)</a></li>
                  <li><a href="/templ/building_tmpl.csv">下载数据模板文件</a></li>
                  <li><a id="exportBtn" href="#">导出数据</a></li>
                </ul>
                <form class="navbar-form navbar-right" role="search">
                  <div class="form-group">
                    <input type="text" class="form-control" placeholder="编号查询">
                  </div>
                </form>

                <ul class="nav navbar-nav pull-right">
                  <li class="divider"></li>
                  <li><a href="#" id="enableEditBtn">编辑<i class="icon-edit"></i></a></li>
                  <li id="extendBtn"><a><i class="icon-search"></i></a></li>
                </ul>
              </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
          </nav><!-- 控制面板 -->
         
          <h2 class="sub-header">Section title</h2>
          <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Header</th>
                  <th>Header</th>
                  <th>Header</th>
                  <th>Header</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1,001</td>
                  <td>Lorem</td>
                  <td>ipsum</td>
                  <td>dolor</td>
                  <td>sit</td>
                </tr>
                <tr>
                  <td>1,002</td>
                  <td>amet</td>
                  <td>consectetur</td>
                  <td>adipiscing</td>
                  <td>elit</td>
                </tr>
                <tr>
                  <td>1,003</td>
                  <td>Integer</td>
                  <td>nec</td>
                  <td>odio</td>
                  <td>Praesent</td>
                </tr>
                <tr>
                  <td>1,003</td>
                  <td>libero</td>
                  <td>Sed</td>
                  <td>cursus</td>
                  <td>ante</td>
                </tr>
                <tr>
                  <td>1,004</td>
                  <td>dapibus</td>
                  <td>diam</td>
                  <td>Sed</td>
                  <td>nisi</td>
                </tr>
                <tr>
                  <td>1,005</td>
                  <td>Nulla</td>
                  <td>quis</td>
                  <td>sem</td>
                  <td>at</td>
                </tr>
                <tr>
                  <td>1,006</td>
                  <td>nibh</td>
                  <td>elementum</td>
                  <td>imperdiet</td>
                  <td>Duis</td>
                </tr>
                <tr>
                  <td>1,007</td>
                  <td>sagittis</td>
                  <td>ipsum</td>
                  <td>Praesent</td>
                  <td>mauris</td>
                </tr>
                <tr>
                  <td>1,008</td>
                  <td>Fusce</td>
                  <td>nec</td>
                  <td>tellus</td>
                  <td>sed</td>
                </tr>
                <tr>
                  <td>1,009</td>
                  <td>augue</td>
                  <td>semper</td>
                  <td>porta</td>
                  <td>Mauris</td>
                </tr>
                <tr>
                  <td>1,010</td>
                  <td>massa</td>
                  <td>Vestibulum</td>
                  <td>lacinia</td>
                  <td>arcu</td>
                </tr>
                <tr>
                  <td>1,011</td>
                  <td>eget</td>
                  <td>nulla</td>
                  <td>Class</td>
                  <td>aptent</td>
                </tr>
                <tr>
                  <td>1,012</td>
                  <td>taciti</td>
                  <td>sociosqu</td>
                  <td>ad</td>
                  <td>litora</td>
                </tr>
                <tr>
                  <td>1,013</td>
                  <td>torquent</td>
                  <td>per</td>
                  <td>conubia</td>
                  <td>nostra</td>
                </tr>
                <tr>
                  <td>1,014</td>
                  <td>per</td>
                  <td>inceptos</td>
                  <td>himenaeos</td>
                  <td>Curabitur</td>
                </tr>
                <tr>
                  <td>1,015</td>
                  <td>sodales</td>
                  <td>ligula</td>
                  <td>in</td>
                  <td>libero</td>
                </tr>
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </div>


<!-- 显示模板 -->
<script type="text/html" id="paintingsCellTable">
<div class="accordion-group">
  <div class="accordion-heading">
    <a class="accordion-toggle" data-toggle="collapse" href="#<@=bodyId @>">
      <i class="icon-folder-open"></i><@=title @></a>
  </div>
  <div id="<@=bodyId @>" class="accordion-body collapse in">
    <div class="accordion-inner">
  <table class="table table-bordered table-hover"> 
  <thead> 
    <tr>
    <@ 
    var titles = [{field: 'buildingId' , title : '楼宇编号', canSort: true }
      , { field: 'name', title: '名称', canSort: true }
      , { field: 'propertyId',  title: '所属物业点', canSort: true }
      , { field: 'areatype1',  title: '区域类型1', canSort: false }
      , { field: 'areatype2',  title: '区域类型2', canSort: false }
      , { field: 'areasize',  title: '面积(平方米)', canSort: true } 
      , { field: 'population',  title: '常驻人数', canSort: true }
      , { field: '',  title: '室分覆盖状态 <span class="label">未覆盖</span> <span class="label label-info">已覆盖</span></a></th>', canSort: false }];

    for(i = 0 ; i<= titles.length -1 ; i++){
      title = titles[i];
    @>
      <th>
        <@ if(title.canSort){ @>
          <a href="#sortby=<@=title.field @>&sortorder=<@=-(sort.order) @>" class="sortlink"> 
        <@ } else { @>
          <a> 
        <@ } @>
            <@=title.title @>
            <@ if ( sort.by === title.field){ @>
            <i class="<@= sort.order === '-1' ? 'icon-arrow-down' : ' icon-arrow-up' @>"/>
            <@ } @>
            </a></th>
    <@ } @>
      <th class="action-ctl"><a>操作</a></th>
    </tr>
  </thead> 
  <tbody id="paintingsListTb">
   <@ 
    for( i = 0 ; i<= cells.length - 1; i++) { 
        var cell = cells[i],
          link = "/paintings/jump?_id=" + cell._id,
          covers = ['gsm', 'td', 'wlan', 'lte'],
          coverStates = [];

        for( j = 0 ; j <= covers.length -1; j++) {
          var cellname = covers[j], 
              coverstate = cell[cellname+'coverState'];
          coverStates.push('<span class="label ' + ( coverstate==='已覆盖' ? 'label-info' : '') 
              + '">' + cellname.toUpperCase() + '</span>');
        }
        var cstag = coverStates.join(' ');
   @>
      <tr data-_id="<@=cell._id @>"><td><@=cell.paintingsId @></td>
        <td><a href="<@=link @>" target="mapwindow"><@=cell.name @><i class="icon-share-alt"/></a></td>
        <td><@=cell.propertyName @></td>
        <td><@=cell.areatype1 @></td>
        <td><@=cell.areatype2 @></td>
        <td><@=cell.areasize @></td>
        <td><@=cell.population @></td>
        <td><@=cstag @></td>
        <td class="action-ctl"><a class="action action-edit">修改<i class="icon-edit"/></a><a class="action action-remove">删除<i class="icon-remove"/></a></td></tr>
   <@ } @>
  </tbody> 
    </table>
    </div>
  </div>
</div>
</script>
<script type="text/html" id="pagebarTpl">
  <div class="pagination">
    <ul>
      <li><a>共有记录：<@=count @>条</a></li>
      <li <@=(currentIdx===0 ? 'class="active"':"" ) @> >
        <a href="#skipto=0">第一页</a></li>
      <li <@=(startPage === pre ? 'class="active"':"" ) @> >
        <a href="#skipto=<@=pre @> ">...</a></li>
        <@ for( i = startPage ; i<= endPage; i++){ @>
          <li <@=(currentIdx === i ? 'class="active"':"" ) @> >
            <a href="#skipto=<@=i@>"><@=i@></a></li>
        <@ } @>
        <li <@= (endPage === next ? 'class="active"':"" ) @> >
          <a href="#skipto=<@=next@>">...</a></li>
        <li><a href="#skipto=<@=pageCnt-1 @>">最后一页</a></li>
    </ul>
  </div>
</script> <!-- 显示模板 -->

  <!-- 确认对话框 -->
  <div id="confirmDlg" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">再次确认:</h3>
    </div>
    <div class="modal-body">
      <p>是否确认要做这个动作？</p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary ok" data-dismiss="modal">确认</button>
      <button class="btn no" data-dismiss="modal">取消</button>
    </div>
  </div> <!-- 确认对话框 -->

  <!-- 导入信息对话框 -->
  <div id="importDlg" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">导入CELL</h3>
    </div>
    <div class="modal-body">
      <pre id="previewDiv"></pre>
    </div>
    <div class="modal-footer">
      <div id="fileUploader"></div>
      <button class="btn cancle" data-dismiss="modal" aria-hidden="true">取消</button>
      <button id="saveBuildingBtn" class="btn btn-primary">确认导入</button>
    </div>
  </div> <!-- 导入信息对话框 -->


  <!-- 楼宇编辑修改对话框 -->
  <div id="moduleDlg" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">修改对象信息</h3>
    </div>
    <div class="modal-body">

      <ul class="nav nav-tabs" id="buildingNavtab">
            <li class="active"><a href="#b1" data-toggle="tab">基本信息</a></li>
            <li class=""><a href="#b2" data-toggle="tab">楼宇图片</a></li>
            <li class=""><a href="#b3" data-toggle="tab">指标详情</a></li>
        </ul>

        <div class="container span12">
          <form id="module-form" class="form-horizontal">
            <fieldset>
            <div class="tab-content">
                <div class="tab-pane active" id="b1">
          <div class="row">
              <div class="span5">

              <div class="control-group">
                    <label class="control-label" for="input01">楼宇名称</label>
                    <div class="controls">
                      <input type="text" name="name" id="module-name"  placeholder="楼宇名称,不能重复,必填" class="input-large required">
                    </div>
                  </div>

                <div class="control-group">
                    <label class="control-label" for="input01">楼宇标识</label>
                    <div class="controls">
                      <input type="text" name="buildingId" id="module-buildingId" placeholder="根据所属物业点自动生成" class="input-large required" >
                    </div>
                  </div>

                  <div class="control-group">
                    <label class="control-label" for="input01">归属物业点名称</label>
                    <div class="controls">
                      <input type="text" name="propertyName" id="module-propertyName" placeholder="当前位置所属物业点" class="input-large" readonly>
                    </div>
                  </div>

                <div class="control-group">
                    <label class="control-label" for="input01">所属物业点编号</label>
                    <div class="controls">
                      <input type="text" name="propertyId" id="module-propertyId"  placeholder="物业点编号" class="input-large" readonly>
                      <p class="help-block"></p>
                    </div>
                  </div>

                <div class="control-group">
                    <label class="control-label" for="input01">经纬度</label>
                    <div class="controls">
                      <input type="text" id="module-loc"  placeholder="当前经纬度（百度标准）" class="input-large" readonly>
                    </div>
                  </div>

                <div class="control-group">
                    <label class="control-label" for="input01">地市县区</label>
                    <div class="controls">
                      <input type="text" id="module-cityarea"  placeholder=""  placeholder="" class="input-large" readonly>
                      
                    </div>
                  </div>

                  <div class="control-group">
                      <label class="control-label">区域类型1</label>
                      <div class="controls">
                        <select name="areatype1" id="module-areatype1" class="input-large">
                  <option>密集城区</option>
                  <option>一般城区</option>
                  <option>县城城区</option>
                  <option>乡镇</option>
                  <option>风景区</option></select>
                      </div>
                </div>

                <div class="control-group">
                      <label class="control-label">规划建设</label>
                      <div class="controls">
                        <select name="needbuild" id="module-needbuild" class="input-large">
                      <option>否</option>
                      <option>是</option>
                      
                    </select>
                      </div>
                </div>

                <div class="control-group">
                      <label class="control-label">维护优化</label>
                      <div class="controls">
                        <select name="needoptimization" id="module-needoptimization" class="input-large">
                      <option>否</option>
                      <option>是</option>
                      
                    </select>
                      </div>
                </div>

                <div class="control-group">
                      <label class="control-label">终端营销</label>
                      <div class="controls">
                        <select name="needmarket" id="module-needmarket" class="input-large">
                     <option>否</option>
                      <option>是</option>
                      
                    </select>
                      </div>
                </div>

                <div class="control-group">
                      <label class="control-label">市场推广</label>
                      <div class="controls">
                        <select name="needspread" id="module-needspread" class="input-large">
                      <option>否</option>
                      <option>是</option>
                      
                    </select>
                      </div>
                </div>
            </div>

            <div class="span5">
                <div class="control-group">
                      <label class="control-label">区域类型2</label>
                      <div class="controls">
                        <select name="areatype2" id="module-areatype2" class="input-large">
    
                  <option>高校园区</option>
                  <option>政府机关</option>
                  <option>办公写字楼</option>
                  <option>交通枢纽</option>
                  <option>乡镇农村</option>
                  <option>住宅小区</option>
                  <option>宾馆饭店</option>
                  <option>商业建筑</option>
                  <option>工厂企业</option>
                  <option>公共场所</option></select>
                      </div>
                </div>

                <div class="control-group">
                    <label class="control-label" for="input01">区域类型3</label>
                    <div class="controls">
                      <input type="text" name="areatype3" id="module-areatype3" placeholder="补充描述" class="input-large">
                    </div>
                  </div>

                <div class="control-group">
                    <!-- Select Basic -->
                    <label class="control-label">层数</label>
                    <div class="controls">
                      <input type="text" name="level" id="module-flownumber" placeholder="请输入整数" class="input-large">
                    </div>
              </div>
                
                  <div class="control-group">
                    <label class="control-label" for="module-areasize">面积(平方米)</label>
                    <div class="controls">
                       <input type="text" name="areasize" id="module-areasize" placeholder="请输入有效数字" class="required input-large err">
                    </div>
                  </div>

                <div class="control-group">
                      <label class="control-label">常驻人数</label>
                      <div class="controls">
                         <input type="text" name="population" id="module-population" placeholder="请输入整数" class="input-large">
                      </div>
                    </div>

                <div class="control-group">
                      <!-- Select Basic -->
                      <label class="control-label">建筑年代</label>
                      <div class="controls">
                        <input type="text" name="buildage" id="module-buildage" placeholder="格式:2001" class="input-large">
                      </div>
                    </div>


                <div class="control-group">
                      <label class="control-label">GSM室分覆盖状态</label>
                      <div class="controls">
                  <select name="gsmcoverState" id="module-gsmcoverState" class="input-large">
                      <option>未覆盖</option>
                      <option>已覆盖</option>
                    </select>
                      </div>
                </div>

                <div class="control-group">
                      <label class="control-label">TD室分覆盖状态</label>
                      <div class="controls">
                  <select name="tdcoverState" id="module-tdcoverState" class="input-large">
                      <option>未覆盖</option>
                      <option>已覆盖</option>
                    </select>
                      </div>
                </div>

                <div class="control-group">
                      <label class="control-label">WLAN室分覆盖状态</label>
                      <div class="controls">
                  <select name="wlancoverState" id="module-wlancoverState" class="input-large">
                      <option>未覆盖</option>
                      <option>已覆盖</option>
                    </select>
                      </div>
                </div>

                <div class="control-group">
                      <label class="control-label">LTE室分覆盖状态</label>
                      <div class="controls">
                  <select name="ltecoverState" id="module-ltecoverState" class="input-large">
                      <option>未覆盖</option>
                      <option>已覆盖</option>
                    </select>
                      </div>
                </div>
            </div>
          </div> <!-- 楼宇基本信息 -->
                </div>
              
        <!-- 上传文件 -->
              <div class="tab-pane" id="b2">
                  <div class="row">
              <div class="control-group"><div class="span4"><div id="picUploader"></div></div></div>
          </div>
          <li id="piclist" class="span9"></li>
              </div>

              <!-- 楼宇室分覆盖信息 -->
                <div class="tab-pane" id="b3">
            <div class="row">
            <div class="span6">
                <div class="control-group">
                    <label class="control-label" for="input01">GSM小区编号</label>
                    <div class="controls">
                        <input type="text" name="gsmCellItem" id="buildingForm-gsmCellItem" placeholder="GSM小区,多个小区用逗号隔开" class="input-large">     
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="input01">TD小区编号</label>
                    <div class="controls">
                        <input type="text" name="tdCellItem" id="buildingForm-gsmCellItem" placeholder="GSM小区,多个小区用逗号隔开" class="input-large">     
                    </div>
                </div>
              <div class="control-group">
                  <label class="control-label">验证</label>
                  <div class="controls">
                  <button class="cell-valide btn">验证CELL有效性</button>
                  </div>
              </div>
              </div>
              <div class="span6">
                <div class="control-group">
                <label class="control-label" for="input01">WLAN小区编号</label>
                    <div class="controls">
                        <input type="text" name="wlanCellItem" id="buildingForm-gsmCellItem" placeholder="GSM小区,多个小区用逗号隔开" class="input-large">     
                    </div>
                </div>
              <div class="control-group">
                <label class="control-label" for="input01">LTE小区编号</label>
                    <div class="controls">
                        <input type="text" name="lteCellItem" id="buildingForm-gsmCellItem" placeholder="GSM小区,多个小区用逗号隔开" class="input-large">     
                    </div>
                </div>
              </div>
              <div class="span12">
              <h5>指标统计结果</h5>
                <table class="table table-bordered table-hover"> 
                <thead> 
                <tr>
                    <th><a href="#">计算时间</a></th>
                    <th><a href="#">GSM覆盖量</a></th>
                    <th><a href="#">TD覆盖量</a></th>
                    <th><a href="#">WLAN覆盖量</a></th>
                    <th><a href="#">LTE覆盖量</a></th>
                    <th><a href="#">A+Abis信息</a></th>
                </tr> 
                </thead>
              </table>
            </div>
                    </div>
                  </div> <!-- 楼宇室分覆盖信息 -->
          </div>
          </fieldset>
          </form>
    </div>
    </div>
    <div class="modal-footer">
      <button class="btn cancle" data-dismiss="modal" aria-hidden="true">取消</button>
      <button id="saveBuildingBtn" class="btn btn-primary">确定</button>  
    </div>
  </div><!-- paintings编辑修改对话框 -->


  <!-- JS文件放在靠近HTML页面尾部的地方可以加快页面显示的速度 -->
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/sharepage.base.js"></script>
    <script src="js/sharepage.js"></script>
    <script src="js/paintings.js"></script>

<% include foot.html %>

